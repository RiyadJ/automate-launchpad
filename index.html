<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Automate Your Business</title>
    <meta name="description" content="Lovable Generated Project" />
    <meta name="author" content="Lovable" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <link rel="icon" type="image/png" href="/favicon.png" />

    <meta property="og:title" content="Automate Your Business" />
    <meta property="og:description" content="Lovable Generated Project" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@lovable_dev" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <!-- n8n Chat styles -->
    <link href="https://cdn.jsdelivr.net/npm/@n8n/chat/dist/style.css" rel="stylesheet" />
    <link rel="preconnect" href="https://cdn.jsdelivr.net">

    <!-- Aotumate Chat skin -->
    <style>
      :root{
        /* Brand / surfaces */
        --aotu-bg: #0b0f19;
        --aotu-panel: #0f172a;
        --aotu-text: #e5e7eb;
        --aotu-muted: #9ca3af;
        --aotu-white: #ffffff;

        /* Accents (darker indigo) */
        --aotu-indigo: #4f46e5;      /* darker primary */
        --aotu-indigo-550: #4b51e0;  /* hover */
        --aotu-indigo-600: #4338ca;  /* active */
        --aotu-lime: #a3e635;        /* secondary/CTA */

        /* Sizing */
        --aotu-width: clamp(340px, 34vw, 420px);
        --aotu-height: clamp(560px, 70vh, 680px);
        --aotu-radius: 18px;
        --aotu-spacing: 12px;
      }

      /* Map to n8n chat vars */
      :root{
        --chat--color-primary: var(--aotu-indigo);
        --chat--color-primary-shade-50: var(--aotu-indigo-550);
        --chat--color-primary-shade-100: var(--aotu-indigo-600);

        --chat--color-secondary: var(--aotu-lime);
        --chat--color-secondary-shade-50: #84cc16;

        --chat--color-white: var(--aotu-white);
        --chat--color-light: #101827;
        --chat--color-light-shade-50: #0f172a;
        --chat--color-light-shade-100: #0b1220;
        --chat--color-medium: #1f2937;
        --chat--color-dark: var(--aotu-bg);
        --chat--color-disabled: #6b7280;
        --chat--color-typing: #374151;

        --chat--spacing: var(--aotu-spacing);
        --chat--border-radius: var(--aotu-radius);
        --chat--transition-duration: .18s;

        --chat--window--width: var(--aotu-width);
        --chat--window--height: var(--aotu-height);

        /* Header */
        --chat--header-height: auto;
        --chat--header--padding: calc(var(--aotu-spacing) * 1.25);
        --chat--header--background: linear-gradient(135deg,#0c1224 0%,#0e142b 60%,#0b0f19 100%);
        --chat--header--color: var(--aotu-white);
        --chat--heading--font-size: 1rem;
        --chat--subtitle--font-size: .86rem;
        --chat--subtitle--line-height: 1.6;

        /* Messages */
        --chat--message--font-size: .96rem;
        --chat--message--padding: calc(var(--aotu-spacing) * 1.05);
        --chat--message--border-radius: calc(var(--aotu-radius) - 6px);
        --chat--message-line-height: 1.7;
        --chat--message--bot--background: var(--aotu-panel);
        --chat--message--bot--color: var(--aotu-text);
        --chat--message--bot--border: 1px solid #111827;
        --chat--message--user--background: var(--aotu-indigo);
        --chat--message--user--color: var(--aotu-white);
        --chat--message--user--border: none;
        --chat--message--pre--background: rgba(255,255,255,.04);

        /* Input / launcher */
        --chat--textarea--height: 54px;
        --chat--toggle--background: var(--aotu-indigo);
        --chat--toggle--hover--background: var(--aotu-indigo-550);
        --chat--toggle--active--background: var(--aotu-indigo-600);
        --chat--toggle--color: var(--aotu-white);
        --chat--toggle--size: 58px;
      }

      /* polish */
      .n8n-chat__window{
        backdrop-filter: saturate(140%) blur(6px);
        border: 1px solid rgba(148,163,184,.14);
        box-shadow: 0 16px 44px rgba(0,0,0,.48);
        /* 5) pad window from edges */
        right: 28px !important;
        bottom: 112px !important; /* keep above launcher */
      }
      .n8n-chat__header{ border-bottom: 1px solid rgba(99,102,241,.28); }
      .n8n-chat__toggle{
        /* 5) pad launcher from corner */
        right: 24px !important;
        bottom: 24px !important;
        margin: 0;
        box-shadow: 0 8px 28px rgba(67,56,202,.45);
      }
      .n8n-chat__message--user{
        /* darker gradient to match new primary */
        background: linear-gradient(135deg,#4f46e5 0%,#4338ca 100%) !important;
      }
      .n8n-chat__message pre{
        border-radius: 12px;
        border: 1px solid #1f2937;
        padding: 10px 12px;
        font-size: .9rem;
        overflow-x: auto;
      }
      /* 1) Hide "Powered by n8n" */
      .n8n-chat__powered,
      .n8n-chat__powered-by,
      .n8n-chat__footer a[href*="n8n"]{
        display: none !important;
      }
    </style>
  </head>

  <body>
    <div id="root"></div>

    <!-- Chat mount target -->
    <div id="aotumate-chat"></div>

    <!-- Aotumate Chat (dynamic import to avoid Rollup HTML ESM parsing) -->
    <script>
      (async () => {
        if (window.__aotumateChatMounted) return;
        window.__aotumateChatMounted = true;

        const { createChat } = await import('https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js');

        const qs = new URLSearchParams(location.search);
        const utm = Object.fromEntries(
          ['utm_source','utm_medium','utm_campaign','utm_content','utm_term'].map(k => [k, qs.get(k) || ''])
        );
        const metadata = {
          site: 'aotumate.com',
          path: location.pathname,
          referrer: document.referrer || '',
          tz: Intl.DateTimeFormat().resolvedOptions().timeZone || '',
          ...utm,
        };

        const i18n = {
          en: {
            /* 4) Rename assistant */
            title: 'Aotumate Support',
            /* 3) General subtitle for support/Q&A/booking */
            subtitle: 'Ask anything about automations, support, or booking a consultation.',
            footer: '',
            /* 2) We’ll disable welcome screen; keep label just in case */
            getStarted: 'Start',
            inputPlaceholder: 'How can I help you today?',
          },
          ar: {
            title: 'دعم Aotumate',
            subtitle: 'اسأل عن الأتمتة أو الدعم أو حجز استشارة.',
            footer: '',
            getStarted: 'ابدأ',
            inputPlaceholder: 'كيف أقدر أساعدك اليوم؟',
          },
        };

        /* 7) Neutral initial messages */
        const initialMessages = [
          "Hey — I'm Aotumate Copilot.",
          "How can I help you today? I can answer questions, help book a call, or check your request status."
        ];

        createChat({
          webhookUrl: 'https://n8n.operata.tech/webhook/d3ca59c1-5555-4124-9e0f-4d1a000dee7d/chat',
          webhookConfig: {
            method: 'POST',
            headers: {
              'X-Client-Origin': location.origin,
              'X-Client-Path': location.pathname
            }
          },
          target: '#aotumate-chat',
          mode: 'window',

          chatInputKey: 'chatInput',
          chatSessionKey: 'sessionId',
          loadPreviousSession: true,

          defaultLanguage: 'en',
          i18n,
          initialMessages,

          enableStreaming: true,
          /* 2) Remove “New Conversation” hero */
          showWelcomeScreen: false,

          metadata
        });
      })();
    </script>

    <!-- Your app -->
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
